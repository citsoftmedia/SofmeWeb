<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8"/>
    <title>音楽ゲーム制作入門</title>
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/vnd.microsoft.icon"/>
    <meta name="description" content="ソフトメディア研究会"/>
    <meta name="keywords" content="ソフメ,ソフトメディア研究会,sofme"/>

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@cit_sofume"/>
    <meta property="og:url" content="http://softmedia.sakura.ne.jp/"/>
    <meta property="og:title" content="ソフメアドベントカレンダー12月2日「音楽ゲーム制作入門」 -鉄鉱石-"/>
    <meta property="og:description" content="SoftMedia Official Site | CIT"/>
    <meta property="og:image" content="http://softmedia.sakura.ne.jp/advent-calendar/2020/img/thumbnail/thumbnail_2.gif"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet"/>
    <link rel="stylesheet" href="/css/styles-merged.css"/>
    <link rel="stylesheet" href="/css/style.min.css"/>
    <link rel="stylesheet" href="/css/custom.css"/>
    <link rel="stylesheet" href="/css/advent-calender.css" media="screen"/>

    <link rel="stylesheet" type="text/css" href="/plugins/prism/prism.css" media="all" />
    <script type="text/javascript" src="/plugins/prism/prism.js"></script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="/js/common.js"></script>
    <script type="text/javascript" src="/js/analytics.js"></script>
</head>

<body>
<script type="text/javascript">
    header();
</script>

<section class="probootstrap-slider flexslider">
    <ul class="slides">
        <li style="background-image: url(img/thumbnail/thumbnail_2.gif);" class="overlay2">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <div class="slides-text probootstrap-animate" data-animate-effect="fadeIn">
                            <h2>音楽ゲーム制作入門</h2>
                            <p>鉄鉱石</p>
                        </div>
                    </div>
                </div>
            </div>
        </li>
    </ul>
</section>

<section class="probootstrap-section">
    <div class="container">
        <div class="item">
            <p>　この記事は<a href="http://softmedia.sakura.ne.jp/advent-calendar/2020/index.html">Sofme AdventCalendar 2020</a> 2日目の記事となります。</p>
            <p>　みなさんこんにちは。プログラム班3回生の鉄鉱石です。</p>
            <p>　僕は音楽ゲームが好きでよく遊んでいるのですが、自分でも音楽ゲームを作ってみたい！と思い、現在音楽ゲームの制作をしています。昨年度のアドベントカレンダーでは同じような書き出しで<a href="http://softmedia.sakura.ne.jp/advent-calendar/2019/12-8.html" title="伝えたい情報の量について">音楽ゲームのデザインについての記事</a>を書きましたが、今回は「はじめて音楽ゲームを作る」という状況において、最初にどのような音楽ゲームを作るべきかを既存の音楽ゲームを分析していくことで考えていきます。</p>
            <p>　音楽ゲームをこれから作っていきたいという人には少しは参考になるかなと思います。なお、この記事では音楽ゲーム制作に関わるアルゴリズム(判定アルゴリズム、ノーツ表示アルゴリズムなど)については少しだけ話しますが、実際のプログラミングについては触れません。ご了承のほどよろしくお願いします。</p>
            <h1>もくじ</h1>
            <ul>
            <li><a href="#音楽ゲームの本質">音楽ゲームの本質</a></li>
            <li><a href="#音楽ゲームの演出を分類してみよう">音楽ゲームの演出を分類してみよう</a><ul>
            <li><a href="#ノーツ落下型">ノーツ落下型</a></li>
            <li><a href="#ノーツ拡大型">ノーツ拡大型</a></li>
            <li><a href="#その他">その他</a></li>
            <li><a href="#どの方法がいいのか">どの方法がいいのか</a></li>
            </ul>
            </li>
            <li><a href="#スクロールシステムを考える">スクロールシステムを考える</a><ul>
            <li><a href="#時間基準型">時間基準型</a></li>
            <li><a href="#小節位置基準型">小節位置基準型</a></li>
            <li><a href="#各スクロールシステムの利点と欠点">各スクロールシステムの利点と欠点</a></li>
            </ul>
            </li>
            </ul>
            <h1 id="音楽ゲームの本質">音楽ゲームの本質</h1>
            <p>　既存の音楽ゲーム、世の中に多く出ていますよね。昔は音楽ゲームといえばアーケードゲーム<a href="#*1">*1</a>でしたが、最近はスマートフォン向けの音楽ゲームも非常に流行しています。
            実は、これらの音楽ゲームすべてに共通するのは</p>
            <ul>
            <li>ある設定された時間(以下「入力時間」)にできるだけ近い時間で、プレイヤーがある決められた操作を入力する</li>
            </ul>
            <p>　という要素<strong>だけ</strong>なのです。</p>
            <p>　もちろん、これだけだとゲームとして面白くありません。いつ動き出したのか分からないストップウォッチを持たされて、「目を閉じたままx秒で止めてね。x秒が何秒なのかは教えないけどね。」と言われているようなものです。
            そのため、ほとんどの音楽ゲームは</p>
            <ul>
            <li>音楽のリズムに合わせて入力時間が設定されている</li>
            <li>入力時間に合わせて画面が変化する</li>
            </ul>
            <p>　などの演出を行うことで、ユーザーが入力時間を認識できるように、そして「音楽のリズムに合わせて入力をする」という音楽ゲームの楽しみを提供できるようにしています。
            そして、この演出の方法で音楽ゲームは様々なパターンに分類することができるのです。</p>
            <h1 id="音楽ゲームの演出を分類してみよう">音楽ゲームの演出を分類してみよう</h1>
            <p>　今回は「入力時間に合わせて画面が変化する」という音楽ゲームの基本となる演出について、その方法別に分類をしていきたいと思います。
            (分類の名称は筆者が命名したもので、一般的な名称ではありません。)</p>
            <h2 id="ノーツ落下型">ノーツ落下型</h2>
            <p>　音楽に合わせて処理するべきオブジェクト(以下「ノーツ」)が落下してきて、判定ラインとノーツが重なったタイミングで操作を行うというタイプの音楽ゲームとなります。
            入力や表現方法の違いによってさらに「固定レーン式」「自由レーン式」「その他」の3タイプに分けられます。なお、あまり初心者の制作の参考にはならないため、今回は「その他」のタイプの説明は省略します。</p>
            <h3 id="固定レーン式">固定レーン式</h3>
            <p>　固定レーン式は1つのレーンに1種類のノーツが流れてくるタイプの音楽ゲームです。
            1つのレーンに対して1つの入力デバイスが割り当てられるのが基本となります。それぞれのレーンの処理が独立しており重複が発生しないため、アルゴリズム的にも作りやすいタイプの音楽ゲームとです。
            音楽ゲームの代名詞である『beatmania』シリーズや、社会現象にもなった『Dance Dance Revolution』がこのタイプのゲームの代表作となります。また、『太鼓の達人』のような、見た目上は複数のレーンが重なっているがそれぞれの処理が独立しているゲームも固定レーン式となります。</p>
            <img src="https://i.imgur.com/O5gM5lF.png" width=50%>
            
            <p>図1:『beatmania IIDX』。8つのレーンにノーツが降ってくる。
            (画像引用：<a href="https://p.eagate.573.jp/game/eac2dx/infinitas/p/common/info/iidx_howto.html">遊び方 | beatmania IIDX INFINITAS</a>)</p>
            <img src="https://i.imgur.com/mfW3zo8.jpg" width=50%>
            
            <p>図2:『Dance Dance Revolution』。4つのレーンに降ってきたノーツに合わせて足元のパネルを踏む。
            (画像引用：<a href="https://p.eagate.573.jp/game/ddr/ddra20/p/howto/index.html">HOW TO PLAY | DanceDanceRevolution A20 PLUS</a>)</p>
            <img src="https://i.imgur.com/LxD6UuM.png" width=50%>
            
            <p>図3:『太鼓の達人』。太鼓型のデバイスで入力を行う。
            (画像引用：<a href="https://taiko.namco-ch.net/taiko/howto/onpu.php">遊び方 │ 太鼓の達人</a>)</p>
            <h3 id="自由レーン式">自由レーン式</h3>
            <p>　自由レーン式は1つの広いレーンにさまざまな形状・種類のノーツが流れてくるタイプの音楽ゲームです。
            1つのレーンの中でさらに入力位置を取得する必要があることから、入力デバイスはタッチパネルとなることが多いです。また、ジョイスティック<a href="#*2">*2</a>やマウスなどアナログ入力のできる機器を用いる場合もあります。固定レーン式と比較するとハードウェアの条件が厳しく実装も難しいですが、ノーツの幅の変更やスライドノーツの追加などができるようになるため、譜面の表現の幅はかなり広がります。
            アーケード音楽ゲームであれば『チュウニズム』、スマートフォン音楽ゲームであれば『Deemo』がこのタイプのゲームとして有名ですね。</p>
            <img src="https://i.imgur.com/XF9Yg5R.jpg" width=50%>
            
            <p>図4:『チュウニズム』。通常のタップや長押しのほかに「手を上げる/下ろす」という動作も必要な珍しいゲーム。
            (画像引用：<a href="https://chunithm.sega.jp/play/">キホンのあそび方 | CHUNITHM CRYSTAL PLUS</a>)</p>
            <img src="https://i.imgur.com/DW3UtCW.png" width=50%>
            
            <p>図5:『Deemo』。降ってくるノーツに合わせてスマートフォンの画面をタップする。
            (画像引用：<a href="https://www.jp.playstation.com/software/title/jp1386pcsg00685_00deemolastrecital.html">DEEMO～ラスト・リサイタル～</a>)</p>
            <h2 id="ノーツ拡大型">ノーツ拡大型</h2>
            <p>音楽に合わせてノーツが拡大し、ある大きさになったタイミングで操作を行うというタイプの音楽ゲームとなります。
            ノーツ落下型はノーツが移動するスペースが必要な都合上、画面全体に対してノーツを処理するエリアが狭くなりがちですが、ノーツ拡大型はノーツが移動するスペースが必要ないため、画面全体をノーツ出現エリアとして使用することができるという利点があります。そのため、ノーツ拡大型はタッチパネルでの操作に適しており、スマートフォン向けの音楽ゲームに適しています。
            一方、ノーツ落下型はノーツどうしのタイミング差をノーツ間隔という形で直感的に理解できますが、ノーツ拡大型はノーツどうしのタイミング差が認識しづらく、比較的覚えゲーになってしまいやすいという欠点もあります。
            アーケード音楽ゲームであれば『jubeat』、スマートフォン音楽ゲームであれば『Cytus』が代表作でしょうか。</p>
            <img src="https://i.imgur.com/hChFLwk.jpg" width=40%>
            
            <p>図6:『jubeat』。16枚のパネルに浮かび上がるノーツをタップする。
            (画像引用：<a href="https://www.konami.com/amusement/products/am_jubeat_saucer/">jubeat saucer fulfill | KONAMI コナミアーケードゲーム製品・サービス情報サイト</a>)</p>
            <img src="https://i.imgur.com/aE6aQZ2.jpg" width=50%>
            
            <p>図7:『Cytus』。浮かび上がるノーツが移動している判定ラインと重なるタイミングでタップする、ノーツ落下型の特徴も取り入れたゲーム。
            (画像引用：<a href="https://store-jp.nintendo.com/list/software/70010000011476.html">Cytus α ダウンロード版 | My Nintendo Store</a>)</p>
            <h2 id="その他">その他</h2>
            <p>いわゆる「音楽ゲーム」の大半はノーツ落下型とノーツ拡大型の2通りの演出となっていますが、様々なリズム系ゲームに視野を広げると他にも多くの演出があります。
            例えば『リズム天国』はゲーム全体がアニメーションのような演出になっており、演出の開始から入力までの時間が他の音楽ゲームと比べて短くなっています。それでも成立する理由は「リズムに合わせてボタンを押すだけ」というこのゲームのコンセプトにあります。このゲームは楽曲のリズムに合わせたシンプルな譜面デザインになっており、画面を見ずに音だけ聞いていても操作ができるようなゲームデザインになっているため、音楽ゲーム部分における画面の重要度が低く、特殊な演出をしても問題ないのです。
            このように、ゲームのコンセプトがしっかりしていれば、それに合わせて通常から外した演出を取るという選択肢を取ることもできます。</p>
            <img src="https://i.imgur.com/tagDnyW.gif" width=75%>
            
            <p>図8:『リズム天国』。リズムに合わせてボタンを押すシンプルなミニゲームの集まりで構成されている。
            (画像引用：<a href="https://www.nintendo.co.jp/n08/brij/what/index.html">リズムでゲーム！？ | ゲームボーイアドバンス</a>)</p>
            <h2 id="どの方法がいいのか">どの方法がいいのか</h2>
            <p>　ということで、音楽ゲームの画面変化演出についていくつかの方法を挙げてみました。では、実際にはじめて音楽ゲームを作る場合にはどの方法を取るのがいいのでしょうか。
            それを決めるために、それぞれの方法を実装するにあたってどのようなことを考える必要があるのかを比較してみましょう。</p>
            <p>　まず、固定レーン式と自由レーン式の比較をしてみます。
            固定レーン式と自由レーン式の基本的なシステムに違いはありません。しかし、自由レーンには固定レーンには存在しない「ノーツの幅」の概念が発生します。また、ノーツの幅が可変であることによって、ノーツ決定アルゴリズムの変更<a href="#*3">*3</a>や可変幅に対応した各種画像の作成<a href="#*4">*4</a>などの問題も発生します。
            一方、固定レーン式に必要で自由レーン式には不要な要素というのは基本存在しません。そのため、自由レーン式は固定レーン式の拡張版だと言うことができます。先述の通り自由レーンにするとハード的な面での制約もかかることを考えると、音楽ゲームを最初に制作する際は固定レーン式と自由レーン式であれば固定レーン式を選択するのが無難といえるでしょう。</p>
            <p>　次に、ノーツ落下型とノーツ拡大型の比較をしてみます。
            ノーツ落下型もノーツ拡大型も、実装するにあたり考える表示アルゴリズムは「ノーツ時間と現在時間を比較し、その差に応じてノーツの位置or拡大率を設定する」ということになります。つまり、ノーツ落下型とノーツ拡大型で考えることはそう変わりないことになります。
            ただし、ノーツ拡大型は落下型と比べてアニメーション作成が比較的難しい<a href="#*5">*5</a>ことを考えると、基本的にはノーツ落下型を選んだほうが無難といえるのではないでしょうか。
            ただ、ここは好みの範疇だと思うので、ノーツ拡大型のゲームに興味がある場合は最初にノーツ拡大型に取り組んでみるのも十分いいと思います。</p>
            <p>　以上より、初めて音楽ゲームを制作する際は、固定レーン式のノーツ落下型音楽ゲームの制作に取り組むのが最も無難だと言えるでしょう。このタイプは様々な音楽ゲームのタイプに発展させることができる基本的な形であり、理解しておくことは今後音楽ゲームを作っていくうえでも重要です。また、ノーツ拡大型は落下型と基本的なシステムに違いはないため、拡大型に興味がある場合は拡大型を作ってみてもいいかもしれません。自由レーン式のゲームを作るのは、一度固定レーン式のゲームを作ってみて経験を積んでからにすることをおすすめします。</p>
            <p>　もちろんコンセプトなどがしっかり決まっている場合はそれに合わせた方法を取るのが一番望ましいですが、とりあえず音楽ゲームを作ってみたいという人は固定レーン式のノーツ落下型音楽ゲームに挑戦してみましょう。  </p>
            <h2 id="ここまでのまとめ">ここまでのまとめ</h2>
            <ul>
            <li>音楽ゲームの本質は「ノーツ時間にできるだけ近い時間でプレイヤーが決められた操作を入力する」という点のみ</li>
            <li>大半の音楽ゲームでは、時間に合わせて画面を変化させることで遊びやすくしている</li>
            <li>最初に作る場合、こだわりがなければ固定レーン式のノーツ落下型音楽ゲームを作るのがおすすめ</li>
            </ul>
            <p>　以降の内容では、固定レーン式のノーツ落下型音楽ゲームで製作することを念頭に置きます。</p>
            <h1 id="スクロールシステムを考える">スクロールシステムを考える</h1>
            <p>　ノーツ落下型音楽ゲームを制作するにあたり大事なのが「スクロールシステム」です。
            スクロールシステムとは、ノーツ落下型の音楽ゲームにおいてノーツを落下させる方法のことです。</p>
            <p>　一般的なノーツ落下型音楽ゲームは、主に2種類のスクロールシステムで表現することができます。この2つのスクロールシステムは譜面の表現(特にBPMが変化する譜面の表現)において大きな違いを持ちます。そのため、この2つのスクロールシステムを知っておいた上で、自分の作りたい音楽ゲームがどちらの方法で実現できるのかを考えておくと、自分の理想通りの譜面表現ができると思います。</p>
            <p>　(「スクロールシステム」及び各システムの名称は筆者が命名したもので、一般的な名称ではありません。)</p>
            <h2 id="時間基準型">時間基準型</h2>
            <p>　時間基準型は、ノーツ時間と現在の楽曲時間を比較してノーツを移動させるシステムです。『太鼓の達人』などがこのシステムで動いていると考えられています<a href="#*6">*6</a>。一番直感的でわかりやすいスクロールシステムなのではないでしょうか。
            時間基準型におけるノーツ位置は次の式で求められます。</p>
            <ul>
            <li>[ノーツ位置] = ( [現在の楽曲時間] - [ノーツ時間] ) * [スクロール定数]</li>
            </ul>
            <p>　この値はジャストタイミングで0となり、ジャストタイミングより早い時間だとマイナス、遅い時間だとプラスの値をとります。</p>
            <p>　このシステムでは、BPMの違いによってスクロール速度が変化しません。しかし、BPMが変化すると同じ4分音符でもその間隔の時間が変化するため、それに依存しているノーツ間隔も同様に変化します。そのため、このシステムではBPMの変化に応じてスクロール速度が変わらずにノーツ間隔のみが変化します。
            『太鼓の達人』プレイヤーであれば、この文章に「ん？」と違和感を感じた人もいるでしょう。その通り、実際の『太鼓の達人』では、BPMが違う楽曲でも4分音符の見た目の間隔は基本的に等しくなっており、その分スクロール速度が違っています。これは、上の式の[スクロール定数]が譜面によって異なっており<a href="#*7">*7</a>、BPMが違う楽曲でも同じ間隔の音符であれば見た目の間隔が一致するようになっているためです。</p>
            <p>　なお、ノーツの移動中にスクロール定数を変更することはできません。なぜなら、スクロール定数を変更するとノーツが瞬間移動してしまうためです<a href="#*8">*8</a>。
            そこで、このタイプの音楽ゲームでは各ノーツごとに速度倍率を格納する変数(以下「速度変数」)を持たせておき、各ノーツのスクロール速度を([譜面全体のスクロール定数] * [そのノーツの速度変数])に設定していると考えられます。これにより、ある時間の範囲に存在するノーツ全体の速度倍率を変更することで、譜面の見た目上の速度の変化が可能となっています。(<a href="https://youtu.be/U-Mpz99pxcg">この動画</a>(注：非公式)の0:43-が分かりやすいです。)</p>
            <p>　この形式を取ることで発生する特徴的な現象として、「譜面の追い越し」があります。先述の通り各ノーツは独立して速度変数を持っています。そのため、各ノーツごとにスクロール速度が違うという現象が発生します。そのため、速度変数の高いノーツAの後に速度変数の低いノーツBがあると、先に画面内に現れるのは遅いノーツBだが、途中で速いノーツAがノーツBを追い抜かすという現象が発生する場合があります。
            譜面の追い越しというギミックを使いたい場合はこのスクロールシステム(というより「各ノーツに速度変数を設けるシステム」)を採用するといいでしょう。(ただし、やりすぎると<a href="https://youtu.be/_v0byXDgMXw">こうなる</a>(注：非公式)のでご注意を。)</p>
            <h2 id="小節位置基準型">小節位置基準型</h2>
            <p>　小節位置基準型は、時間ではなく「楽譜における現在の位置」を比較対象とするシステムです。その値が4/4拍子の楽譜の1小節を基準にしているケースが多いことから筆者は個人的に「小節位置」と呼んでいます。この小節位置はBPMによらず楽譜上の位置が同じであれば同じ値になるという特徴があります<a href="#*9">*9</a>。
            改めて説明すると、小節位置基準型はそのノーツの設置されている小節位置と現在の楽曲の小節位置を比較してノーツを移動させるシステムです。『beatmania』シリーズなどがこのシステムで動いていると考えられています。
            小節位置基準型におけるノーツ位置は次の式で求められます。</p>
            <ul>
            <li>[ノーツ位置] = ( [現在の楽曲の小節位置] - [ノーツの小節位置] ) * [スクロール定数]</li>
            </ul>
            <p>　時間基準型と同様に、この値はジャストタイミングで0となり、ジャストタイミングより早い時間だとマイナス、遅い時間だとプラスの値をとります。</p>
            <p>　このシステムでは、小節位置の特徴よりBPMの違いによってノーツ間隔が変化しません。しかし、[現在の楽曲の小節位置]の時間当たりの変化量はそのときのBPMに比例します。そのため、BPMが変化すると[現在の楽曲の小節位置]の変化量も変化し、結果として見た目のスクロール速度が変化します。そのため、この形式は譜面間隔が変化せずにスクロール速度が変化する時間基準型とは正反対の仕様となります。</p>
            <p>　この形式を取ることで発生する特徴的な現象として、スクロール速度の変化が可能になることが挙げられます。時間基準型でもノーツごとに速度変数を設定することで疑似的な速度変化はできていましたが、このシステムではBPMの変わる瞬間に見た目のスクロール速度が切り替わるという動作になります。これによりノーツの意図せぬワープや追い抜きを起こさずにBPMを切り替えることができます。
            時間基準型と同様に、スクロール定数を変化させると譜面はワープしてしまいます。しかし、そもそもBPMを変化させれば見た目のスクロール速度は適した値に変化するため、譜面側からゲーム中にスクロール定数を変化させる必要がないというのがこのシステムの面白いポイントといえるでしょう。</p>
            <p>　このシステムの特徴として、「時間」という音楽ゲームの本質に関わる(=安易に変更できない)パラメータではなく「小節位置」というひとつ噛ませたパラメータを用いることで、譜面制作に幅を持たせることができるようになることが挙げられます。例えば、「○秒間だけ小節位置を変化させない」というコマンドを用意してあげれば、譜面停止を実装することができます。また、極短時間だけ異常に速いBPMの区間を用意することで、譜面のワープを実装することもできるでしょう。このように、譜面の整合性を保ちつつ様々なギミックも入れることのできる自由さがあるのが小節位置基準型の大きな特徴です。</p>
            <img src="https://i.imgur.com/1Ozv4v7.gif" width=75%>
            
            <p>図9:各スクロールシステムにおけるBPM変化のイメージ。時間基準では各ノーツごとに速度が違うため追い越しが発生しているが、小節位置基準では追い越しが発生せず、BPM変化時にスクロール速度が一律で変化している。</p>
            <h2 id="各スクロールシステムの利点と欠点">各スクロールシステムの利点と欠点</h2>
            <p>　2つのスクロールシステムそれぞれの利点と欠点をまとめます。</p>
            <p><strong>時間基準型</strong></p>
            <ul>
            <li>利点<ul>
            <li>時間に直接依存するため直感的</li>
            <li>実装が容易</li>
            <li>ノーツごとにスクロール速度を設定する手法と相性がいい</li>
            </ul>
            </li>
            <li>欠点<ul>
            <li>全体のスクロール速度を変更するとノーツのワープが発生する</li>
            <li>譜面停止などのギミックを入れることは難しい</li>
            </ul>
            </li>
            <li>両方の性質を持つ特徴<ul>
            <li>ノーツの追い抜きが発生する<ul>
            <li>利点：追い抜きギミックを実装したい場合は簡単に実装できる</li>
            <li>欠点：音楽の譜面として考えたときに不自然</li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
            <p><strong>小節位置基準型</strong></p>
            <ul>
            <li>利点<ul>
            <li>譜面のワープや追い抜きが発生しない</li>
            <li>譜面の整合性を守ったまま様々なギミックを実装できる</li>
            </ul>
            </li>
            <li>欠点<ul>
            <li>時間に直接依存しないため理解が難しい</li>
            <li>実装が難しい</li>
            </ul>
            </li>
            </ul>
            <p>これらの利点と欠点からそれぞれの手法をどのように使えばいいかを考えると、</p>
            <ul>
            <li>時間基準型：初めて音楽ゲームを作る場合、譜面の追い越しを許容する場合</li>
            <li>小節位置基準型：BPM変化やギミックを用いた譜面を作る場合、譜面の追い越しを許容しない場合</li>
            </ul>
            <p>といった感じに分類できるのではないでしょうか。
            時間基準型は音楽ゲーム制作初心者向け、小節位置基準型は音楽ゲーム制作経験者や音楽ゲームにこだわりを持っている人向けと言えそうです。</p>
            <p>ちなみに、筆者が過去の津田沼祭や文化の祭典で公開していたスマートフォン向け音楽ゲーム『aspros.echo』は、2019年の文化の祭典における初公開時は時間基準型で製作していました。しかし、2019年の津田沼祭に向けた2回目の公開時に、BPMが大きく変化する楽曲を収録するのに合わせて小節位置基準型に作り直しました。当時の技術ではシステム全体を小節位置基準型で作り直すのはなかなか難しかったのですが、結果その楽曲のBPM変化の演出がかなりハマったので、取り組んでよかったと安堵した思い出があります。
            (その楽曲はゲームのラスボス曲として曲・譜面共に強い存在感を放ちました。)</p>
            <h2 id="ここまでのまとめ-1">ここまでのまとめ</h2>
            <ul>
            <li>ノーツ落下式音楽ゲームでは「時間基準型」と「小節位置基準型」の2つのスクロールシステムでおおむね表現可能</li>
            <li>2つのスクロールシステムはBPM変化時の譜面の表現方法などが異なる</li>
            <li>こだわりがなければ音楽ゲーム制作初心者は時間基準型システムがおすすめ</li>
            </ul>
            <h1 id="おわりに">おわりに</h1>
            <p>　以上、既存の音楽ゲームのシステムを分析・分類して、どのような音楽ゲームがあるのか、そして音楽ゲーム制作初心者はどのような音楽ゲームを作ってみるのがいいのかを見てきました。</p>
            <p>　結論としては、こだわりがなければ1つのレーンに1種類のノートが降ってくるタイプのノーツ落下式音楽ゲームの制作が経験を積むのに適しており、そのスクロールは時間を基準にしておくととりあえず扱いやすいといった感じになりました。
            もちろんコンセプトが決まっているのであればそれを実現するための手法を選択するべきですが(この記事がその手法の選択肢を増やすきっかけになっていれば嬉しいです)、とりあえず何か音楽ゲームを作ってみたい！という方はこのようなゲームを作ってみるといいと思います。</p>
            <p>　なお、今回は実際にゲームを作るところについては触れませんでしたが、ここについては別の機会にやりたいと思います。先述の通り、音楽ゲームの本質はその入力時間とノーツ時間との差を小さくすることにあり、音楽ゲームのアルゴリズムはその判定アルゴリズムが大半を占めています。つまり、判定アルゴリズムさえ作れてしまえばあとはだいたいなんとかなります。ぜひ判定アルゴリズムを調べてみたり、自作してみたりしてください。ソフメの音楽ゲーム制作勢が増えてくれるととても嬉しいですし、そのためにできる限りはサポートしますので、質問・相談等あれば気軽にどうぞ。 </p>
            <p>　かなり長い記事となってしまいましたが、楽しんでいただけたなら幸いです。 </p>
            <p>　明日はLen Dilemmaくんの記事です！　みんなもクイズをやろう！</p>

            <div class="footnote_wrapper">
                <h2>脚注</h2>
                <p id="*1" class="footnote">*1 : 業務用ゲーム機。ゲームセンターに置いてあるやつ。</p>
                <p id="*2" class="footnote">*2 : スティック(レバー)を傾けることで方向入力を行う機器。</p>
                <p id="*3" class="footnote">*3 : ある位置で入力を行った際、固定レーン式ではその入力に対応するレーンが1つしかなく、そのレーンのノーツの中から最も近いノーツを検索すればいい。しかし、自由レーン式では全ノーツからその入力位置に対応するノーツを検索し、その中からさらに最も近いノーツを検索する必要がある。</p>
                <p id="*4" class="footnote">*4 : ノーツ画像のほかにも、ノーツを処理した際のエフェクトなども可変幅に対応する必要がある。</p>
                <p id="*5" class="footnote">*5 : ノーツ落下型はただ移動させるだけでいいが、拡大型の場合、ノーツの透明度やエフェクトなども調整しないと画面全体の視認性が悪くなってしまう。</p>
                <p id="*6" class="footnote">*6 : 内部システムは公開されていないため確定はできず、「このシステムであればそのゲームの仕様を再現できる」という程度に留まる。</p>
                <p id="*7" class="footnote">*7 : BPMが低い楽曲ほどこの値は高くなり、BPMが高い楽曲ほどこの値は低くなる。</p>
                <p id="*8" class="footnote">*8 : 例えば現在時間=0[s]、ノーツ時間=1[s]、スクロール定数=100[px/s]のときのノーツ位置は-100[px]だが、この瞬間にスクロール定数を50[px/s]にすると、式が再計算されノーツ位置が-50[px]にワープしてしまう。</p>
                <p id="*9" class="footnote">*9 : 例えば4/4拍子の楽譜の1小節の長さを1として、1小節目の1拍目の小節位置を0とする。このとき、4/4拍子の楽曲の5小節目の3拍目にあるノーツの小節位置は、BPMが128であっても192であっても256であっても等しく5.5となる。</p>
            </div>
            
        </div>
    </div>
</section>

<script type="text/javascript">
    footer();
</script>

<div class="gototop js-top">
    <a href="#" class="js-gotop">
        <i class="icon-chevron-thin-up"></i>
    </a>
</div>

<script src="/js/scripts.min.js"></script>
<script src="/js/main.min.js"></script>
<script src="/js/custom.js"></script>
</body>

</html>
